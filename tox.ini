[tox]
minversion = 3.23.0
requires:
    pip >= 21.0.1
envlist =
    py{3.7,3.8,3.9}-django{30,31,32}-drf{311,312}

[gh-actions]
python =
    3.7: py3.7
    3.8: py3.8
    3.9: py3.9

[travis:env]
DJANGO =
    3.0: django30
    3.1: django31
    3.2: django32

[testenv]
passenv = TRAVIS TRAVIS_* GITHUB_*
deps=
    coverage
    coveralls
    testfixtures
    django30: Django>=3.0.13,<3.1.0
    django31: Django>=3.1.7,<3.2.0
    django32: Django>=3.2.0rc1,<3.3.0
    drf311: djangorestframework>=3.11.2,<3.12.0
    drf312: djangorestframework>=3.12.4,<3.13.0
    flake8
sitepackages = False
recreate = False
commands =
    pip list
    flake8 versatileimagefield/
    coverage run --parallel-mode --source=versatileimagefield runtests.py
    coverage run --parallel-mode --source=versatileimagefield post_processor_runtests.py
    coverage combine
    - coveralls --service=github
